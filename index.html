<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Banana Files</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Syne:wght@700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #ffffff;
  --surface: #f7f7f5;
  --surface2: #eeeeeb;
  --border: #e0e0db;
  --text: #1a1a1a;
  --muted: #777;
  --yellow: #f5c842;
  --yellow-dark: #d4a800;
  --danger: #e05555;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; min-height: 100vh; }

.screen { min-height: 100vh; width: 100%; }
#auth-screen { display: flex; align-items: center; justify-content: center; }
#app-screen  { display: none; flex-direction: column; }
#app-screen.visible { display: flex; flex-direction: column; }

.auth-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 48px 44px;
  width: 100%;
  max-width: 420px;
  animation: fadeUp 0.4s ease;
}
@keyframes fadeUp { from { opacity:0; transform:translateY(16px); } to { opacity:1; transform:translateY(0); } }

.auth-brand { display: flex; align-items: flex-end; gap: 1px; margin-bottom: 32px; }
.auth-brand img { width: 32px; height: 32px; object-fit: contain; position: relative; top: -4px; right: -2px; flex-shrink: 0; }
.auth-brand h1 { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 800; letter-spacing: -0.5px; line-height: 1; color: #86878b; margin-bottom: 1px; }

.auth-tabs { display: flex; background: var(--surface2); border-radius: 10px; padding: 4px; margin-bottom: 24px; }
.auth-tab { flex: 1; padding: 9px; text-align: center; font-size: 14px; font-weight: 500; border-radius: 7px; cursor: pointer; color: var(--muted); border: none; background: none; transition: all 0.2s; }
.auth-tab.active { background: var(--yellow); color: #111; font-weight: 700; }

.auth-form { display: flex; flex-direction: column; gap: 14px; }
.form-group label { display: block; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--muted); margin-bottom: 6px; }
.form-group input { width: 100%; background: var(--bg); border: 1px solid var(--border); border-radius: 10px; padding: 11px 14px; color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 14px; outline: none; transition: border-color 0.2s; }
.form-group input:focus { border-color: var(--yellow); }

.btn-primary { background: var(--yellow); color: #111; border: none; border-radius: 10px; padding: 13px; font-family: 'DM Sans', sans-serif; font-size: 15px; font-weight: 700; cursor: pointer; transition: all 0.2s; margin-top: 4px; }
.btn-primary:hover { background: var(--yellow-dark); }

.err-msg { background: rgba(224,85,85,0.08); border: 1px solid rgba(224,85,85,0.3); border-radius: 8px; padding: 10px 12px; font-size: 13px; color: #cc4444; display: none; }
.auth-note { text-align: center; font-size: 12px; color: var(--muted); margin-top: 18px; }

.nav { height: 60px; background: var(--surface); border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 28px; gap: 12px; position: sticky; top: 0; z-index: 100; flex-shrink: 0; }
.nav-brand { display: flex; align-items: flex-end; gap: 1px; font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 800; line-height: 1; color: #86878b; letter-spacing: -0.5px; padding-bottom: 1px; }
.nav-brand img { width: 32px; height: 32px; object-fit: contain; position: relative; top: -4px; right: -2px; flex-shrink: 0; }
.nav-spacer { flex: 1; }
.nav-user { display: flex; align-items: center; gap: 10px; font-size: 13px; color: var(--muted); }
.nav-avatar { width: 32px; height: 32px; background: var(--yellow); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 800; color: #111; }
.btn-logout { background: var(--surface2); border: 1px solid var(--border); border-radius: 8px; padding: 6px 14px; font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 600; color: var(--muted); cursor: pointer; transition: all 0.2s; }
.btn-logout:hover { color: var(--text); }

.main { display: flex; flex: 1; }

.sidebar { width: 220px; flex-shrink: 0; background: var(--surface); border-right: 1px solid var(--border); padding: 20px 12px; display: flex; flex-direction: column; gap: 2px; }
.sidebar-label { font-size: 10px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--muted); padding: 4px 10px; margin: 8px 0 4px; }
.sidebar-item { display: flex; align-items: center; gap: 10px; padding: 9px 10px; border-radius: 9px; font-size: 13px; font-weight: 500; font-family: 'DM Sans', sans-serif; cursor: pointer; color: #999; border: 1px solid transparent; transition: all 0.15s; }
.sidebar-item:hover { background: var(--surface2); color: #666; }
.sidebar-item.active { background: rgba(245,200,66,0.12); color: #b8900a; border-color: rgba(245,200,66,0.3); }
.sidebar-item .icon { font-size: 15px; }

.storage-bar-wrap { margin-top: auto; padding: 16px 10px 4px; border-top: 1px solid var(--border); }
.storage-info { display: flex; justify-content: space-between; font-size: 11px; color: var(--muted); margin-bottom: 6px; }
.storage-bar { height: 4px; background: var(--surface2); border-radius: 4px; overflow: hidden; }
.storage-fill { height: 100%; background: var(--yellow); border-radius: 4px; transition: width 0.4s; }

.content { flex: 1; padding: 28px 32px; overflow-y: auto; background: var(--bg); }

.stats-row { display: grid; grid-template-columns: repeat(3,1fr); gap: 14px; margin-bottom: 24px; }
.stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 18px 20px; }
.stat-label { font-size: 10px; font-weight: 700; letter-spacing: 0.8px; text-transform: uppercase; color: var(--muted); margin-bottom: 6px; }
.stat-value { font-family: 'DM Sans', sans-serif; font-size: 24px; font-weight: 700; color: #888; }
.stat-value span { font-size: 13px; font-weight: 400; color: var(--muted); font-family: 'DM Sans', sans-serif; }

/* ‚îÄ‚îÄ UPLOAD ZONE ‚Äî now with two buttons ‚îÄ‚îÄ */
.upload-zone {
  border: 2px dashed var(--border); border-radius: 16px;
  padding: 36px; text-align: center;
  transition: all 0.2s; margin-bottom: 24px; position: relative;
}
.upload-zone:hover, .upload-zone.drag-over { border-color: var(--yellow); background: rgba(245,200,66,0.04); }
.upload-icon { font-size: 32px; margin-bottom: 10px; }
.upload-zone h3 { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
.upload-zone p { font-size: 13px; color: var(--muted); margin-bottom: 18px; }

.upload-btn-row { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
.upload-btn {
  display: inline-flex; align-items: center; gap: 7px;
  background: var(--yellow); color: #111;
  border: none; border-radius: 10px; padding: 10px 20px;
  font-family: 'DM Sans', sans-serif; font-size: 14px; font-weight: 700;
  cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden;
}
.upload-btn:hover { background: var(--yellow-dark); }
.upload-btn input[type="file"] {
  position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%;
}
.upload-btn-secondary {
  background: var(--surface2); color: var(--text);
  border: 1px solid var(--border);
}
.upload-btn-secondary:hover { background: var(--border); }

.upload-progress { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 14px 16px; margin-bottom: 14px; display: none; }
.progress-info { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 8px; color: var(--muted); }
.progress-track { height: 4px; background: var(--surface2); border-radius: 4px; overflow: hidden; }
.progress-fill { height: 100%; background: var(--yellow); border-radius: 4px; width: 0%; transition: width 0.1s; }
.progress-sub { font-size: 11px; color: var(--muted); margin-top: 6px; }

.content-header { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
.content-header h2 { font-family: 'DM Sans', sans-serif; font-size: 20px; font-weight: 700; flex: 1; color: #888; }
.search-bar { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 8px 14px; font-family: 'DM Sans', sans-serif; font-size: 13px; color: var(--text); outline: none; width: 220px; transition: border-color 0.2s; }
.search-bar:focus { border-color: var(--yellow); }
.search-bar::placeholder { color: var(--muted); }

.files-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(170px,1fr)); gap: 12px; }
.file-card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 16px; cursor: pointer; transition: all 0.2s; position: relative; animation: fadeUp 0.25s ease; }
.file-card:hover { border-color: rgba(245,200,66,0.5); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
.file-icon { font-size: 30px; margin-bottom: 10px; display: block; }
.file-name { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 4px; }
.file-path { font-size: 10px; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 4px; }
.file-meta { font-size: 11px; color: var(--muted); }
.file-actions { position: absolute; top: 8px; right: 8px; display: flex; gap: 4px; opacity: 0; transition: opacity 0.2s; }
.file-card:hover .file-actions { opacity: 1; }
.file-action-btn { width: 26px; height: 26px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg); display: flex; align-items: center; justify-content: center; font-size: 12px; cursor: pointer; transition: all 0.15s; }
.file-action-btn:hover { background: var(--yellow); border-color: var(--yellow); }
.file-action-btn.del:hover { background: var(--danger); border-color: var(--danger); }

.empty-state { text-align: center; padding: 80px 20px; color: var(--muted); }
.empty-state .big-icon { font-size: 48px; margin-bottom: 14px; }
.empty-state h3 { font-size: 16px; font-weight: 600; color: var(--text); margin-bottom: 6px; }

.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(4px); animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
.modal { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; width: 100%; max-width: 680px; max-height: 85vh; display: flex; flex-direction: column; overflow: hidden; animation: fadeUp 0.2s ease; }
.modal-header { display: flex; align-items: center; gap: 12px; padding: 16px 20px; border-bottom: 1px solid var(--border); }
.modal-title { flex: 1; font-size: 15px; font-weight: 600; }
.modal-body { flex: 1; overflow: auto; padding: 20px; }
.modal-close { width: 30px; height: 30px; border-radius: 8px; background: var(--surface2); border: 1px solid var(--border); cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; transition: all 0.15s; }
.modal-close:hover { background: var(--danger); border-color: var(--danger); color: white; }
.modal-footer { padding: 12px 20px; border-top: 1px solid var(--border); display: flex; gap: 10px; }
.btn-secondary { background: var(--surface2); border: 1px solid var(--border); border-radius: 9px; padding: 8px 16px; font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 600; color: var(--text); cursor: pointer; transition: all 0.15s; }
.btn-download { background: var(--yellow); border: none; border-radius: 9px; padding: 8px 16px; font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 700; color: #111; cursor: pointer; }
.preview-image { max-width: 100%; border-radius: 8px; }
.preview-text { white-space: pre-wrap; font-family: monospace; font-size: 13px; line-height: 1.6; color: #333; background: var(--surface2); border-radius: 8px; padding: 14px; max-height: 380px; overflow: auto; }
.preview-none { text-align: center; padding: 40px; color: var(--muted); }
.preview-none .big-icon { font-size: 44px; margin-bottom: 10px; }

.toast-container { position: fixed; bottom: 24px; right: 24px; z-index: 9999; display: flex; flex-direction: column; gap: 8px; }
.toast { background: #1a1a1a; color: #fff; border-radius: 10px; padding: 12px 18px; font-size: 13px; font-weight: 500; box-shadow: 0 8px 24px rgba(0,0,0,0.15); animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s forwards; }
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes fadeOut { from { opacity: 1; } to { opacity: 0; transform: translateX(100%); } }

/* Large file notice badge */
.idb-badge { display: inline-flex; align-items: center; gap: 5px; background: rgba(245,200,66,0.15); border: 1px solid rgba(245,200,66,0.4); border-radius: 20px; padding: 4px 10px; font-size: 11px; font-weight: 600; color: #8a6d00; margin-left: auto; }
</style>
</head>
<body>

<!-- ‚ïê‚ïê AUTH SCREEN ‚ïê‚ïê -->
<div id="auth-screen" class="screen">
  <div class="auth-card">
    <div class="auth-brand">
      <img src="data:image/png;base64,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" alt="B" />
      <h1>anana Files</h1>
    </div>

    <div class="auth-tabs">
      <button class="auth-tab active" id="tab-login" onclick="switchTab('login')">Sign In</button>
      <button class="auth-tab" id="tab-signup" onclick="switchTab('signup')">Create Account</button>
    </div>

    <div id="auth-error" class="err-msg"></div>

    <form class="auth-form" id="auth-form">
      <div class="form-group" id="name-field" style="display:none">
        <label>Your Name</label>
        <input type="text" id="auth-name" placeholder="Jane Doe" />
      </div>
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="auth-username" placeholder="yourname" required />
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="auth-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
      </div>
      <button class="btn-primary" type="button" id="auth-btn" onclick="handleAuth()">Sign In</button>
    </form>

    <p class="auth-note">Files stored locally in your browser via IndexedDB.</p>
  </div>
</div>

<!-- ‚ïê‚ïê APP SCREEN ‚ïê‚ïê -->
<div id="app-screen" class="screen">

  <nav class="nav">
    <div class="nav-brand">
      <img src="data:image/png;base64,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" alt="B" />
      anana Files
    </div>
    <div class="nav-spacer"></div>
    <div class="nav-user">
      <div class="nav-avatar" id="nav-avatar">?</div>
      <span id="nav-username">User</span>
    </div>
    <button class="btn-logout" onclick="logout()">Sign Out</button>
  </nav>

  <div class="main">
    <aside class="sidebar">
      <div class="sidebar-label">Browse</div>
      <div class="sidebar-item active" id="nav-all" onclick="setView('all',this)"><span class="icon">üìÅ</span> All Files</div>
      <div class="sidebar-item" id="nav-images" onclick="setView('images',this)"><span class="icon">üñºÔ∏è</span> Images</div>
      <div class="sidebar-item" id="nav-documents" onclick="setView('documents',this)"><span class="icon">üìÑ</span> Documents</div>
      <div class="sidebar-item" id="nav-videos" onclick="setView('videos',this)"><span class="icon">üé¨</span> Videos</div>
      <div class="sidebar-item" id="nav-other" onclick="setView('other',this)"><span class="icon">üì¶</span> Other</div>

      <div class="storage-bar-wrap">
        <div class="storage-info">
          <span>Storage</span>
          <span id="storage-pct">0%</span>
        </div>
        <div class="storage-bar"><div class="storage-fill" id="storage-fill" style="width:0%"></div></div>
        <div class="storage-info" style="margin-top:6px">
          <span id="storage-used">0 B</span>
          <span id="storage-max">/ ‚àû</span>
        </div>
      </div>
    </aside>

    <div class="content">
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">Total Files</div>
          <div class="stat-value" id="stat-total">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Storage Used</div>
          <div class="stat-value" id="stat-size">0 <span>B</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Last Upload</div>
          <div class="stat-value" id="stat-last" style="font-size:14px;padding-top:5px">‚Äî</div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ UPLOAD ZONE ‚îÄ‚îÄ -->
      <div class="upload-zone" id="upload-zone">
        <div class="upload-icon">‚òÅÔ∏è</div>
        <h3>Drop files or folders here</h3>
        <p>Any file type ¬∑ No size limit ¬∑ Stored locally via IndexedDB</p>
        <div class="upload-btn-row">
          <label class="upload-btn">
            üìÑ Upload Files
            <input type="file" id="file-input" multiple onchange="handleFiles(this.files)" />
          </label>
          <label class="upload-btn upload-btn-secondary">
            üìÇ Upload Folder
            <input type="file" id="folder-input" webkitdirectory multiple onchange="handleFiles(this.files)" />
          </label>
        </div>
      </div>

      <div class="upload-progress" id="upload-progress">
        <div class="progress-info">
          <span id="progress-name">Uploading...</span>
          <span id="progress-pct">0%</span>
        </div>
        <div class="progress-track"><div class="progress-fill" id="progress-fill"></div></div>
        <div class="progress-sub" id="progress-sub"></div>
      </div>

      <div class="content-header">
        <h2 id="view-title">All Files</h2>
        <span class="idb-badge">‚ö° IndexedDB ¬∑ No size limit</span>
        <input class="search-bar" placeholder="üîç  Search..." oninput="renderFiles(this.value)" />
      </div>

      <div id="empty-state" class="empty-state">
        <div class="big-icon">üçå</div>
        <h3>No files yet</h3>
        <p>Upload files or an entire folder above</p>
      </div>
      <div class="files-grid" id="files-grid" style="display:none"></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê FILE MODAL ‚ïê‚ïê -->
<div id="modal" class="modal-overlay" style="display:none" onclick="closeModal(event)">
  <div class="modal">
    <div class="modal-header">
      <span id="modal-icon" style="font-size:20px"></span>
      <div class="modal-title" id="modal-name"></div>
      <button class="modal-close" onclick="closeModalDirect()">‚úï</button>
    </div>
    <div class="modal-body" id="modal-body"></div>
    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeModalDirect()">Close</button>
      <button class="btn-download" onclick="downloadCurrent()">‚¨á Download</button>
    </div>
  </div>
</div>

<div class="toast-container" id="toasts"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  INDEXEDDB LAYER
//  Replaces localStorage for file data.
//  Supports files of any size (limited only by
//  available disk space, typically 50%+ of disk).
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const DB_NAME    = 'BananaFilesDB';
const DB_VERSION = 1;
const STORE_META = 'fileMeta';   // lightweight metadata rows
const STORE_BLOB = 'fileBlob';   // raw File/Blob objects (no base64 overhead)

let _db = null;

function openDB() {
  if (_db) return Promise.resolve(_db);
  return new Promise((resolve, reject) => {
    const req = indexedDB.open(DB_NAME, DB_VERSION);
    req.onupgradeneeded = e => {
      const db = e.target.result;
      if (!db.objectStoreNames.contains(STORE_META)) {
        db.createObjectStore(STORE_META, { keyPath: 'id' });
      }
      if (!db.objectStoreNames.contains(STORE_BLOB)) {
        db.createObjectStore(STORE_BLOB, { keyPath: 'id' });
      }
    };
    req.onsuccess = e => { _db = e.target.result; resolve(_db); };
    req.onerror   = e => reject(e.target.error);
  });
}

async function dbPut(storeName, record) {
  const db = await openDB();
  return new Promise((resolve, reject) => {
    const tx  = db.transaction(storeName, 'readwrite');
    const req = tx.objectStore(storeName).put(record);
    req.onsuccess = () => resolve(req.result);
    req.onerror   = e  => reject(e.target.error);
  });
}

async function dbGetAll(storeName, indexFilter) {
  const db = await openDB();
  return new Promise((resolve, reject) => {
    const tx    = db.transaction(storeName, 'readonly');
    const req   = tx.objectStore(storeName).getAll();
    req.onsuccess = () => resolve(req.result);
    req.onerror   = e  => reject(e.target.error);
  });
}

async function dbGet(storeName, id) {
  const db = await openDB();
  return new Promise((resolve, reject) => {
    const tx  = db.transaction(storeName, 'readonly');
    const req = tx.objectStore(storeName).get(id);
    req.onsuccess = () => resolve(req.result);
    req.onerror   = e  => reject(e.target.error);
  });
}

async function dbDelete(storeName, id) {
  const db = await openDB();
  return new Promise((resolve, reject) => {
    const tx  = db.transaction(storeName, 'readwrite');
    const req = tx.objectStore(storeName).delete(id);
    req.onsuccess = () => resolve();
    req.onerror   = e  => reject(e.target.error);
  });
}

// User-scoped meta helpers
async function getUserFiles(username) {
  const all = await dbGetAll(STORE_META);
  return all.filter(f => f.owner === username);
}

async function saveFileMeta(meta)       { return dbPut(STORE_META, meta); }
async function saveFileBlob(id, blob)   { return dbPut(STORE_BLOB, { id, blob }); }
async function getFileBlob(id)          { const r = await dbGet(STORE_BLOB, id); return r ? r.blob : null; }
async function deleteFileMeta(id)       { return dbDelete(STORE_META, id); }
async function deleteFileBlob(id)       { return dbDelete(STORE_BLOB, id); }

// ‚ïê‚ïê STATE ‚ïê‚ïê
let currentUser = null;
let currentView = 'all';
let currentFileMeta = null;
let authMode = 'login';

// ‚ïê‚ïê AUTH (still uses localStorage for tiny user records) ‚ïê‚ïê
const getUsers    = ()   => JSON.parse(localStorage.getItem('bf_users')    || '{}');
const saveUsers   = u    => localStorage.setItem('bf_users', JSON.stringify(u));
const getSession  = ()   => localStorage.getItem('bf_session');
const saveSession = u    => localStorage.setItem('bf_session', u);
const clearSess   = ()   => localStorage.removeItem('bf_session');

function switchTab(mode) {
  authMode = mode;
  document.getElementById('tab-login').classList.toggle('active', mode === 'login');
  document.getElementById('tab-signup').classList.toggle('active', mode === 'signup');
  document.getElementById('name-field').style.display = mode === 'signup' ? 'block' : 'none';
  document.getElementById('auth-btn').textContent = mode === 'login' ? 'Sign In' : 'Create Account';
  document.getElementById('auth-error').style.display = 'none';
}

function handleAuth() {
  const username = document.getElementById('auth-username').value.trim().toLowerCase();
  const password = document.getElementById('auth-password').value;
  const name     = document.getElementById('auth-name').value.trim();
  const errEl    = document.getElementById('auth-error');
  errEl.style.display = 'none';

  if (!username) { errEl.textContent = 'Please enter a username.'; errEl.style.display = 'block'; return; }
  if (!password) { errEl.textContent = 'Please enter a password.'; errEl.style.display = 'block'; return; }
  if (password.length < 6) { errEl.textContent = 'Password must be at least 6 characters.'; errEl.style.display = 'block'; return; }

  const users = getUsers();

  if (authMode === 'signup') {
    if (users[username]) { errEl.textContent = 'Username already taken. Try another.'; errEl.style.display = 'block'; return; }
    users[username] = { name: name || username, password, created: Date.now() };
    saveUsers(users);
    currentUser = { username, ...users[username] };
    showToast('üéâ Welcome, ' + currentUser.name + '!');
  } else {
    if (!users[username])                         { errEl.textContent = 'No account found with that username.'; errEl.style.display = 'block'; return; }
    if (users[username].password !== password)    { errEl.textContent = 'Incorrect password.';                  errEl.style.display = 'block'; return; }
    currentUser = { username, ...users[username] };
    showToast('üëã Welcome back, ' + currentUser.name + '!');
  }

  saveSession(username);
  enterApp();
}

function enterApp() {
  document.getElementById('auth-screen').style.display = 'none';
  const app = document.getElementById('app-screen');
  app.classList.add('visible');
  document.getElementById('nav-username').textContent = currentUser.name || currentUser.username;
  document.getElementById('nav-avatar').textContent   = (currentUser.name || currentUser.username)[0].toUpperCase();
  setView('all', document.getElementById('nav-all'));
}

function logout() {
  clearSess();
  currentUser = null;
  document.getElementById('app-screen').classList.remove('visible');
  document.getElementById('auth-screen').style.display = 'flex';
  document.getElementById('auth-username').value = '';
  document.getElementById('auth-password').value = '';
  document.getElementById('auth-name').value = '';
  document.getElementById('auth-error').style.display = 'none';
  switchTab('login');
}

// ‚ïê‚ïê FILE HELPERS ‚ïê‚ïê
function fileIcon(name) {
  const ext = (name.split('.').pop() || '').toLowerCase();
  const m = { jpg:'üñºÔ∏è',jpeg:'üñºÔ∏è',png:'üñºÔ∏è',gif:'üñºÔ∏è',webp:'üñºÔ∏è',svg:'üñºÔ∏è',bmp:'üñºÔ∏è',
              mp4:'üé¨',mov:'üé¨',avi:'üé¨',mkv:'üé¨',webm:'üé¨',
              mp3:'üéµ',wav:'üéµ',flac:'üéµ',aac:'üéµ',
              pdf:'üìï',doc:'üìÑ',docx:'üìÑ',txt:'üìÑ',md:'üìÑ',rtf:'üìÑ',
              xls:'üìä',xlsx:'üìä',csv:'üìä',ppt:'üìã',pptx:'üìã',
              zip:'üì¶',rar:'üì¶','7z':'üì¶',tar:'üì¶',gz:'üì¶',
              js:'üíª',ts:'üíª',py:'üíª',html:'üíª',css:'üíª',json:'üíª' };
  return m[ext] || 'üìÑ';
}
function fileCategory(name) {
  const ext = (name.split('.').pop() || '').toLowerCase();
  if (['jpg','jpeg','png','gif','webp','svg','bmp'].includes(ext))               return 'images';
  if (['pdf','doc','docx','txt','md','rtf','xls','xlsx','csv','ppt','pptx'].includes(ext)) return 'documents';
  if (['mp4','mov','avi','mkv','webm'].includes(ext))                            return 'videos';
  return 'other';
}
function fmtSize(b) {
  if (b < 1024)        return b + ' B';
  if (b < 1048576)     return (b/1024).toFixed(1) + ' KB';
  if (b < 1073741824)  return (b/1048576).toFixed(1) + ' MB';
  return (b/1073741824).toFixed(2) + ' GB';
}
function fmtDate(ts) {
  return new Date(ts).toLocaleDateString('en-US', { month:'short', day:'numeric', year:'numeric' });
}
function esc(s) {
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// ‚ïê‚ïê UPLOAD ‚Äî now stores raw Blobs in IDB (no base64, no 10 GB limit) ‚ïê‚ïê
async function handleFiles(fileList) {
  const files = Array.from(fileList);
  if (!files.length) return;

  const prog = document.getElementById('upload-progress');
  const fill = document.getElementById('progress-fill');
  const pct  = document.getElementById('progress-pct');
  const nm   = document.getElementById('progress-name');
  const sub  = document.getElementById('progress-sub');
  prog.style.display = 'block';

  for (let i = 0; i < files.length; i++) {
    const file = files[i];
    const id   = Date.now() + '_' + Math.random().toString(36).slice(2);

    // Progress feedback
    nm.textContent  = 'Storing: ' + file.name;
    sub.textContent = `File ${i + 1} of ${files.length}`;
    const frac = i / files.length;
    const progress = frac * 100;
    fill.style.width  = progress + '%';
    pct.textContent   = Math.round(progress) + '%';

    // Preserve folder-relative path if available (webkitRelativePath)
    const relativePath = file.webkitRelativePath || file.name;

    // Store the raw Blob (no encoding needed ‚Äî IDB handles binary natively)
    await saveFileBlob(id, file);

    // Store lightweight metadata separately for fast listing
    await saveFileMeta({
      id,
      owner:    currentUser.username,
      name:     file.name,
      path:     relativePath,
      size:     file.size,
      type:     file.type,
      uploaded: Date.now()
    });
  }

  fill.style.width  = '100%';
  pct.textContent   = '100%';
  setTimeout(() => { prog.style.display = 'none'; }, 600);

  document.getElementById('file-input').value   = '';
  document.getElementById('folder-input').value = '';

  renderFiles();
  updateStats();
  showToast('‚úÖ ' + files.length + ' file' + (files.length > 1 ? 's' : '') + ' uploaded');
}

// ‚ïê‚ïê DRAG & DROP ‚ïê‚ïê
const uz = document.getElementById('upload-zone');
uz.addEventListener('dragover', e => {
  e.preventDefault();
  uz.classList.add('drag-over');
});
uz.addEventListener('dragleave', () => uz.classList.remove('drag-over'));
uz.addEventListener('drop', async e => {
  e.preventDefault();
  uz.classList.remove('drag-over');

  // Support dropping folders via DataTransferItemList API
  const items = e.dataTransfer.items;
  if (items && items.length > 0 && items[0].webkitGetAsEntry) {
    const allFiles = [];
    const promises = [];
    for (const item of items) {
      const entry = item.webkitGetAsEntry();
      if (entry) promises.push(collectEntries(entry, allFiles));
    }
    await Promise.all(promises);
    handleFiles(allFiles);
  } else {
    handleFiles(e.dataTransfer.files);
  }
});

// Recursively collect files from a FileSystemEntry (supports nested folders)
function collectEntries(entry, results) {
  return new Promise(resolve => {
    if (entry.isFile) {
      entry.file(f => { results.push(f); resolve(); });
    } else if (entry.isDirectory) {
      const reader = entry.createReader();
      const readAll = () => reader.readEntries(entries => {
        if (!entries.length) { resolve(); return; }
        Promise.all(entries.map(e => collectEntries(e, results))).then(readAll);
      });
      readAll();
    } else {
      resolve();
    }
  });
}

// ‚ïê‚ïê VIEW ‚ïê‚ïê
function setView(view, el) {
  currentView = view;
  document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
  if (el) el.classList.add('active');
  const titles = { all:'All Files', images:'Images', documents:'Documents', videos:'Videos', other:'Other' };
  document.getElementById('view-title').textContent = titles[view] || 'Files';
  renderFiles();
}

async function renderFiles(search) {
  let files = await getUserFiles(currentUser.username);
  if (currentView !== 'all') files = files.filter(f => fileCategory(f.name) === currentView);
  if (search) {
    const q = search.toLowerCase();
    files = files.filter(f => f.name.toLowerCase().includes(q) || (f.path || '').toLowerCase().includes(q));
  }
  const grid  = document.getElementById('files-grid');
  const empty = document.getElementById('empty-state');
  if (!files.length) { empty.style.display='block'; grid.style.display='none'; return; }
  empty.style.display = 'none';
  grid.style.display  = 'grid';

  // Sort newest first
  files.sort((a, b) => b.uploaded - a.uploaded);

  grid.innerHTML = files.map(f => {
    const showPath = f.path && f.path !== f.name;
    const folder   = showPath ? f.path.split('/').slice(0, -1).join('/') : '';
    return `
    <div class="file-card" onclick="openFile('${f.id}')">
      <span class="file-icon">${fileIcon(f.name)}</span>
      <div class="file-name" title="${esc(f.name)}">${esc(f.name)}</div>
      ${folder ? `<div class="file-path" title="${esc(folder)}">üìÅ ${esc(folder)}</div>` : ''}
      <div class="file-meta">${fmtSize(f.size)} ¬∑ ${fmtDate(f.uploaded)}</div>
      <div class="file-actions">
        <div class="file-action-btn" onclick="event.stopPropagation();openFile('${f.id}')" title="Preview">üëÅ</div>
        <div class="file-action-btn" onclick="event.stopPropagation();dlFile('${f.id}')" title="Download">‚¨á</div>
        <div class="file-action-btn del" onclick="event.stopPropagation();delFile('${f.id}')" title="Delete">üóë</div>
      </div>
    </div>`;
  }).join('');
}

async function updateStats() {
  const files = await getUserFiles(currentUser.username);
  const total = files.reduce((s, f) => s + f.size, 0);
  const last  = files.length ? files.reduce((a, b) => a.uploaded > b.uploaded ? a : b) : null;

  document.getElementById('stat-total').textContent = files.length;
  const parts = fmtSize(total).split(' ');
  document.getElementById('stat-size').innerHTML = parts[0] + ' <span>' + parts[1] + '</span>';
  document.getElementById('stat-last').textContent = last ? fmtDate(last.uploaded) : '‚Äî';

  // Storage bar: show used bytes, but cap visually at a soft 50 GB reference
  const REF = 50 * 1024 * 1024 * 1024;
  const pct = Math.min((total / REF) * 100, 100).toFixed(1);
  document.getElementById('storage-fill').style.width = pct + '%';
  document.getElementById('storage-pct').textContent  = pct + '%';
  document.getElementById('storage-used').textContent  = fmtSize(total);
}

// ‚ïê‚ïê PREVIEW ‚ïê‚ïê
async function openFile(id) {
  const f = (await getUserFiles(currentUser.username)).find(x => x.id === id);
  if (!f) return;
  currentFileMeta = f;
  document.getElementById('modal-icon').textContent = fileIcon(f.name);
  document.getElementById('modal-name').textContent = f.path || f.name;
  const body = document.getElementById('modal-body');
  const ext  = (f.name.split('.').pop() || '').toLowerCase();

  const blob  = await getFileBlob(id);
  if (!blob) { body.innerHTML = '<div class="preview-none"><div class="big-icon">‚ö†Ô∏è</div><p>File data not found.</p></div>'; return; }

  const url = URL.createObjectURL(blob);

  if (['jpg','jpeg','png','gif','webp','svg','bmp'].includes(ext)) {
    body.innerHTML = `<img class="preview-image" src="${url}" onload="URL.revokeObjectURL(this.src)" />`;
  } else if (['mp4','webm','mov'].includes(ext)) {
    body.innerHTML = `<video controls style="max-width:100%;border-radius:8px" src="${url}"></video>`;
  } else if (['mp3','wav','aac','flac'].includes(ext)) {
    body.innerHTML = `<audio controls style="width:100%;margin-top:20px" src="${url}"></audio>`;
  } else if (ext === 'pdf') {
    body.innerHTML = `<iframe src="${url}" style="width:100%;height:420px;border:none;border-radius:8px"></iframe>`;
  } else if (['txt','md','js','ts','py','html','css','json','xml','csv'].includes(ext)) {
    const reader = new FileReader();
    reader.onload = () => { body.innerHTML = `<pre class="preview-text">${esc(reader.result)}</pre>`; URL.revokeObjectURL(url); };
    reader.readAsText(blob);
  } else {
    body.innerHTML = `<div class="preview-none"><div class="big-icon">${fileIcon(f.name)}</div><p>No preview available. Download to open.</p></div>`;
    URL.revokeObjectURL(url);
  }

  document.getElementById('modal').style.display = 'flex';
}

function closeModal(e) { if (e.target === document.getElementById('modal')) closeModalDirect(); }
function closeModalDirect() { document.getElementById('modal').style.display = 'none'; currentFileMeta = null; }
function downloadCurrent() { if (currentFileMeta) dlFile(currentFileMeta.id); }

async function dlFile(id) {
  const meta = (await getUserFiles(currentUser.username)).find(x => x.id === id);
  const blob = await getFileBlob(id);
  if (!meta || !blob) return;
  const a   = document.createElement('a');
  a.href    = URL.createObjectURL(blob);
  a.download = meta.name;
  a.click();
  setTimeout(() => URL.revokeObjectURL(a.href), 10000);
  showToast('‚¨á Downloading ' + meta.name);
}

async function delFile(id) {
  if (!confirm('Delete this file? This cannot be undone.')) return;
  await deleteFileMeta(id);
  await deleteFileBlob(id);
  renderFiles();
  updateStats();
  showToast('üóë File deleted');
}

// ‚ïê‚ïê TOAST ‚ïê‚ïê
function showToast(msg) {
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = msg;
  document.getElementById('toasts').appendChild(t);
  setTimeout(() => t.remove(), 3000);
}

// ‚ïê‚ïê INIT ‚ïê‚ïê
(async function() {
  const session = getSession();
  if (session) {
    const users = getUsers();
    if (users[session]) {
      currentUser = { username: session, ...users[session] };
      enterApp();
      return;
    }
  }
  document.getElementById('auth-screen').style.display = 'flex';
  document.getElementById('app-screen').classList.remove('visible');
})();
</script>
</body>
</html>
